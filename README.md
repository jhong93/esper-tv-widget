# Stanford TV News Analyzer

#### Setup instructions

1. Install Rust (see https://rustup.rs/)
2. Clone submodules: `git submodule init && git submodule update`
3. Run `./install_deps.sh` to install the submodules
4. Install python dependencies: `pip3 install -r requirements.txt`
5. Copy/symlink the indexed captions
6. Copy/symlink the data directory
7. Run `./derive_data.py` to generate derived data
8. Run `./develop.py` to start a development server or edit `config.json` to
   serve using wsgi.

#### Running tests

`pytest -v tests`

#### Indexed captions directory

There should be 3 files in this directory

 - `documents.txt` (a list of documents that are indexed)
 - `lexicon.txt` (a list of all the words)
 - `index.bin` (an inverted index file)

#### Data directory

The data directory consists of the following files and directories:

 - `videos.json` (metadata about the videos)
 - `faces.ilist.bin` (intervals when faces are on screen)
 - `people` (directory containing intervals when identified people are on screen)
 - `people.metadata.json` (json dictionary of names to metadata tags)
 - `face-bboxes` (directory containing face bounding boxes)
 - `derived` (this directory is generated by `./derive_data.py`)
