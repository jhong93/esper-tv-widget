{% extends "layout.html" %}

{% block head %}
  {{ super() }}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.css" integrity="sha256-vZ3SaLOjnKO/gGvcUWegySoDU6ff33CS5i9ot8J9Czk=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.js" integrity="sha256-dPTL2a+npIonoK5i0Tyes0txCMUWZBf8cfKRfACRotc=" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/syntax-highlight.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/instructions.css') }}" />
  <script src="/generated/js/defaults.js" /></script>
  <script src="/generated/js/values.js" /></script>
  <script src="{{ url_for('static', filename='js/syntax-highlight.js') }}" /></script>
  <script src="{{ url_for('static', filename='js/instructions.js') }}" /></script>

<style>
.graph_embed {
  border: 0px;
  width:  900px;
  height: 400px;
}

.graph_embed_div {
  text-align: center;
}


</style>

{% endblock %}


{% block content %}
<div class="container">
  <h1>Getting Started</h1>
  <p>
The Stanford Cable TV Analyzer allows you to write queries that count the amount of time where certain people appear on screen or when certain words are spoken on cable TV news.  In this tutorial we'll go over the basics of how to use the tool to write basic queries against the <a href="/data">dataset</a>.   
  </p>

  <hr>

  <h3>Counting the Screen Time of Individuals</h3>

  <p>
    Queries contain a set of filters that specify what segments of video you wish to count.  For example, if you are interested in counting the time a specific individual appears on screen, you can specify a <b>name</b> filter.  The graph below plots the total time of all segments where Hillary Clinton's face is on screen in every month since Jan 2010. (This count includes data from all three channels: CNN, Fox News, and MSNBC). One obvious feature of the graph is the spike in coverage during the 2016 U.S. presidential election.
  </p>
  <p>
    The <a href="/data/people">people</a> page contains the full list of names that can be used in a <b>name</b> filter. The <a href="/methodology">methodology</a> page documents the process of detecting and identifying faces in the dataset.
  </p>

<div class="graph_embed_div">
  <iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%234E79A7%22%2C%22text%22%3A%22name%3D%5C%22Hillary%20Clinton%5C%22%22%7D%5D%7D"></iframe>
</div>

<h3>Comparing Screen Time Counts</h3>

<p>
  Many questions about cable TV news content require direct comparison of screen time counts.  To add new lines to the graph, use the + button to add more query boxes. The following graph compares the screen time of Hillary Clinton (blue) to that of Bernie Sanders (orange). 
</p>

<div class="graph_embed_div">
<iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%234E79A7%22%2C%22text%22%3A%22name%3D%5C%22Hillary%20Clinton%5C%22%22%7D%2C%7B%22color%22%3A%22%23F28E2B%22%2C%22text%22%3A%22name%3D%5C%22Bernie%20Sanders%5C%22%22%7D%5D%7D"></iframe>
</div>


<h3>Filtering by Face Tags</h3>

<p>
  In addition to filtering by a person's name, it is possible to filter by other tags associated with faces in the dataset.  For example, each face detected in our dataset is automatically tagged with a prediction of the individual's binary gender. In the graph below, I used the <b>face tag</b> filter compare the total time a man's face is on screen (blue) with that of woman's faces (orange).
</p>

  <p>
    The <a href="/data/tags">tags</a> page contains the full list of tags that can be used in a <b>face tag</b> filter. 
  </p>

<div class="graph_embed_div">
<iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%234E79A7%22%2C%22text%22%3A%22tag%3D%5C%22male%5C%22%22%7D%2C%7B%22color%22%3A%22%23F28E2B%22%2C%22text%22%3A%22tag%3D%5C%22female%5C%22%22%7D%5D%7D"></iframe>
</div>

<p>
  A query can specify multiple tags that a face must match.  For example, adding the "host" tag to the face tag filter from the prior graph yields this graph that compares the screen time of <b>male show hosts</b> with that of <b>female show hosts</b>.
</p>

<div class="graph_embed_div">
<iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%234E79A7%22%2C%22text%22%3A%22tag%3D%5C%22male%20and%20host%5C%22%22%7D%2C%7B%22color%22%3A%22%23F28E2B%22%2C%22text%22%3A%22tag%3D%5C%22female%20and%20host%5C%22%22%7D%5D%7D"></iframe></div>


<h3>Composite Queries (AND's and OR's)</h3>

<p>
  To allow more precise control over what may be counted, queries may contain multiple filters connected by AND's and OR's.  For example, the graph below extends our previous Hillary Clinton vs. Bernie Sanders graph with a third line (red) that plots the amount of time that both Mrs. Clinton AND Mr. Sanders are on screen.   
</p>

<div class="graph_embed_div">
<iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%234E79A7%22%2C%22text%22%3A%22name%3D%5C%22Hillary%20Clinton%5C%22%22%7D%2C%7B%22color%22%3A%22%23F28E2B%22%2C%22text%22%3A%22name%3D%5C%22Bernie%20Sanders%5C%22%22%7D%2C%7B%22color%22%3A%22%23E15759%22%2C%22text%22%3A%22name%3D%5C%22Hillary%20Clinton%5C%22%20and%20name%3D%5C%22Bernie%20Sanders%5C%22%22%7D%5D%7D"></iframe>
</div>

<p>
  A common use of multiple filters is limit screen time counts certain channels, news programs, or specific times of day or days of the week.  For example, in the graph below we compare the screen time of Bernie Sanders between 6-10pm (US Eastern time) on CNN, Fox News, and MSNBC.  (Mr. Sanders receives the most screen time during this time period on MSNBC.)
</p>

<div class="graph_embed_div">
<iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%2376B7B2%22%2C%22text%22%3A%22name%3D%5C%22bernie%20sanders%5C%22%20and%20channel%3D%5C%22cnn%5C%22%20and%20hour%3D%5C%2218-22%5C%22%22%7D%2C%7B%22color%22%3A%22%23E15759%22%2C%22text%22%3A%22name%3D%5C%22bernie%20sanders%5C%22%20and%20channel%3D%5C%22fox%5C%22%20and%20hour%3D%5C%2218-22%5C%22%22%7D%2C%7B%22color%22%3A%22%23B07AA1%22%2C%22text%22%3A%22name%3D%5C%22bernie%20sanders%5C%22%20and%20channel%3D%5C%22msnbc%5C%22%20and%20hour%3D%5C%2218-22%5C%22%22%7D%5D%7D"></iframe>
</div>

<h3>Transcript Filters</h3>

<p>
  Queries may also filter video content based on the text contents of video transcripts.  For example, if you were interested in how much certain foreign countries are discussed on the news, you could use <b>text</b> filters to compare counts produced by searching the video transcripts for country names.  For example:   
</p>

<div class="graph_embed_div">
<iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%23F28E2B%22%2C%22text%22%3A%22text%3D%5C%22France%5C%22%22%7D%2C%7B%22color%22%3A%22%234E79A7%22%2C%22text%22%3A%22text%3D%5C%22United%20Kingdom%5C%22%22%7D%2C%7B%22color%22%3A%22%23E15759%22%2C%22text%22%3A%22text%3D%5C%22China%5C%22%22%7D%2C%7B%22color%22%3A%22%23FF9DA7%22%2C%22text%22%3A%22text%3D%5C%22Russia%5C%22%22%7D%2C%7B%22color%22%3A%22%23BAB0AC%22%2C%22text%22%3A%22text%3D%5C%22North%20Korea%5C%22%22%7D%5D%7D"></iframe>
</div>

<p>
<b></b>
</p>

<p>
  The <a href="/detailed">advanced documentation</a> page describes additional features of <b>text</b> filters, such the ability to specify of lists of words in a filter (e.g., topic lexicons) or perform searches that match inflections of a word.
</p> 

<p>
  It is important to notice that although <b>text</b> filters were used, the graph above plots measurements of time.  <b>It is does not plot counts of the number of times a phrase is found in the transcript.</b> All queries run by the Stanford Cable TV Analyzer, regardless of the filters used, count the time spanned by video segments that match the specified filters. When interpreting results of queries that contain <b>text</b> filters, users should be mindful that longer text phrases will likely contribute more time per instance than shorter phrases.
</p>

<p>
  Since <b>text</b> filters (like all other filters) are used to select video segments, they can be combined with all other filters in queries.  Combining <b>text</b> and face filters (e.g, <b>name</b> or <b>tag</b>) can yield interesting queries. For example, the following graph counts the time Hillary Clinton is on screen AND the word "email" is spoken. This occurs far more often on Fox News than CNN or MSNBC.
</p>

<div class="graph_embed_div">
<iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%2376B7B2%22%2C%22text%22%3A%22name%3D%5C%22Hillary%20Clinton%5C%22%20and%20text%3D%5C%22email%5C%22%20and%20channel%3D%5C%22cnn%5C%22%22%7D%2C%7B%22color%22%3A%22%23E15759%22%2C%22text%22%3A%22name%3D%5C%22Hillary%20Clinton%5C%22%20and%20text%3D%5C%22email%5C%22%20and%20channel%3D%5C%22fox%5C%22%22%7D%2C%7B%22color%22%3A%22%23B07AA1%22%2C%22text%22%3A%22name%3D%5C%22Hillary%20Clinton%5C%22%20and%20text%3D%5C%22email%5C%22%20and%20channel%3D%5C%22msnbc%5C%22%22%7D%5D%7D"></iframe>
</div>

<p>
  Notice that although the graph above plots counts of time where Mrs. Clinton is on screen AND the word "email" is spoken, the word may not have been spoken by Mrs. Clinton. It is possible the speaker is another person on screen or even an off-screen voice. At this time the Stanford Cable TV Analyzer does not provide the ability to directly filter video by who is speaking.
</p>


<h3>The Query Builder</h3>

<p>
  In this tutorial we described the process of creating queries by directly typing them into the Stanford Cable TV Analyzer's query box.  Some users may prefer using the graphical query builder that is accessible to left of the query box via the 🔍 button.
</p>

<h3>You're set! Now write some queries...</h3>

<p>
  You've now seen a few basic examples of writing screen time queries.  We now invite you to try your own! We're excited to see what analyzes are possible.
</p>

<p>
  The query system has additional features not discussed in this tutorial, such the ability to normalize query results as fractions of other quantities (instead of directly reporting counts of time).  Please see the <a href="/detailed">advanced queries page</a> for documentation of more advanced query features. Also take a look at the <a href="/data">dataset page</a> to learn about the faces and tags available for queries. 
</p>

<!--
<h3>More Query Examples</h3>

<p>
  If no filters are specified, then all videos match the query and the result is a count of all video data in the dataset. 
</p>

<div class="graph_embed_div">
<iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%234E79A7%22%2C%22text%22%3A%22%22%7D%5D%7D"></iframe>
</div>

<p>
  By only using a channel filter, we can compare the total amount of video in the dataset coming from each channel.
</p>

<div class="graph_embed_div">
<iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%2376B7B2%22%2C%22text%22%3A%22channel%3D%5C%22cnn%5C%22%22%7D%2C%7B%22color%22%3A%22%23E15759%22%2C%22text%22%3A%22channel%3D%5C%22fox%5C%22%22%7D%2C%7B%22color%22%3A%22%23B07AA1%22%2C%22text%22%3A%22channel%3D%5C%22msnbc%5C%22%22%7D%5D%7D"></iframe>
</div>
-->

<!--
  <script type="text/javascript">
    initialize();
    setIframeSource('#allData', ['']);

    let channel_queries = [
      '{{ search_keys.channel }}=CNN',
      '{{ search_keys.channel }}=FOX',
      '{{ search_keys.channel }}=MSNBC'
    ];
    setIframeSource('#dataByChannel', channel_queries);
    setCodeArea('#channelCode', channel_queries);

    let men_women_queries = [
      '{{ search_keys.face_tag }}=male',
      '{{ search_keys.face_tag }}=female'
    ];
    setIframeSource('#menVsWomen', men_women_queries);
    setCodeArea('#menVsWomenCode', men_women_queries);

    let clinton_sanders_queries = [
      '{{ search_keys.face_name }}=hillary clinton',
      '{{ search_keys.face_name }}=bernie sanders'
    ];
    setIframeSource('#clintonVsSanders', clinton_sanders_queries);
    setCodeArea('#clintonVsSandersCode', clinton_sanders_queries);

    let united_nations_queries = ['{{ search_keys.text }}="UNITED NATIONS"'];
    setIframeSource('#unitedNations', united_nations_queries);
    setCodeArea('#unitedNationsCode', united_nations_queries);

    let united_nations_window_queries = [
      '{{ search_keys.text }}="UNITED NATIONS" AND {{ search_keys.text_window }}=30'
    ];
    setIframeSource('#unitedNationsWindow', united_nations_window_queries);
    setCodeArea('#unitedNationsWindowCode', united_nations_window_queries);

    setCodeArea('#menAndCNNCode', [
      '{{ search_keys.face_tag }}="male" AND {{ search_keys.channel }}=CNN'
    ]);
    setCodeArea('#sandersAndWallStreetCode', [
      '{{ search_keys.face_name }}="bernie sanders" AND {{ search_keys.text }}="WALL STREET"'
    ]);
    setCodeArea('#sandersAndWallStreetWindowCode', [
      '{{ search_keys.face_name }}="bernie sanders" AND {{ search_keys.text }}="WALL STREET" AND {{ search_keys.text_window }}=30'
    ]);
    setCodeArea('#clintonAndSandersCode', [
      '{{ search_keys.face_name }}="bernie sanders" AND {{ search_keys.face_name }}="hillary clinton"'
    ]);
  </script>
-->
</div>
{% endblock %}
