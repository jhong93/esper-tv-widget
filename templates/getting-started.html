{% extends "layout.html" %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.css" integrity="sha256-vZ3SaLOjnKO/gGvcUWegySoDU6ff33CS5i9ot8J9Czk=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.js" integrity="sha256-dPTL2a+npIonoK5i0Tyes0txCMUWZBf8cfKRfACRotc=" crossorigin="anonymous"></script>

<link rel="stylesheet" href="{{ url_for('static', filename='css/syntax-highlight.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/instructions.css') }}" />

<script src="/generated/js/values.js" /></script>

<script src="{{ url_for('static', filename='js/common.js') }}" /></script>
<script src="{{ url_for('static', filename='js/syntax-highlight.js') }}" /></script>
<script src="{{ url_for('static', filename='js/instructions.js') }}" /></script>

<style>
.graph_embed_1line {
  border: 0px;
  width:  900px;
  height: 425px;
}

.graph_embed_2line {
  border: 0px;
  width:  900px;
  height: 470px;
}

.graph_embed_3line {
  border: 0px;
  width:  900px;
  height: 515px;
}

.graph_embed_5line {
  border: 0px;
  width:  900px;
  height: 600px;
}

.graph_embed_div {
  text-align: center;
}

.example_img {
   border: 1px solid #d0d0d0;
   box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.2);
}
</style>

{% endblock %}


{% block content %}
<div class="container">
  <h1>Getting Started</h1>
  <p>
The Stanford Cable TV Analyzer enables you to write queries that compute the amount of time <i>people appear</i> and the amount of time <i>words are heard</i> in <a href="/data">cable TV news</a>.  In this tutorial we'll go over the basics of how to use the tool to write simple queries.
  </p>

<!--
<p>
  We describe the process of creating queries by directly typing them into the Stanford Cable TV Analyzer's query box.  Some users may prefer using the graphical query builder that is accessible to left of the query box via the üîç button.
</p>
-->

  <hr>

  <h3>Computing the Screen Time of Individuals</h3>

  <p>
    Writing a query using the Stanford Cable TV Analyzer involves specifying filters that determine what video segments to include in a screen time computation.  One of the most important filters is the <b>name</b> filter, which selects video segments where a specified individual appears on screen.  For example, below is a query that computes the amount of time Hillary Clinton's face appeared on screen in every month since January 2010. One obvious feature of the graph is the spike in coverage during the 2016 U.S. presidential election.
  </p>

<div class="graph_embed_div">
  <iframe id="clinton" class="graph_embed_1line"></iframe>
</div>

  <p>
    The <a href="/data/people">people</a> page provides the full list of names that can be used in a <b>name</b> filter. We encourage you to change the name used in the query above to compute the screen time for other individuals. (The query box is editable!)
  </p>

<h3>Comparing Screen Times</h3>

<p>
  Many questions about cable TV news content require comparisons between different screen time computations.  To add new lines to the graph, use the + button to add more query boxes. The following graph compares the screen time of Hillary Clinton to that of Bernie Sanders.
</p>

<div class="graph_embed_div">
<iframe id="clintonSanders" class="graph_embed_2line"></iframe>
</div>

<h3>Filtering by Face Tags</h3>

<p>
  In addition to filtering by a person's name, it is possible to filter by other tags associated with faces that appear in the dataset.  For example, each face detected in our dataset is automatically tagged with a prediction of the individual's binary gender. In the graph below, I used the <b>tag</b> filter to compare the total time men's faces are on screen with that of women.
</p>

<div class="graph_embed_div">
<iframe id="maleFemale" class="graph_embed_2line"></iframe>
</div>

<p>
  A query can specify multiple tags that a face must match.  For example, adding the "host" tag to the face tag filter from the prior graph yields this graph that compares the screen time of <b>male show hosts</b> with that of <b>female show hosts</b>.  Among hosts, the trend toward gender parity appears to have reversed since 2015.
</p>

<div class="graph_embed_div">
<iframe id="maleFemaleHost" class="graph_embed_2line"></iframe></div>

  <p>
    The <a href="/data/tags">tags</a> page contains the full list of tags that can be used in a face <b>tag</b> filter.  You'll see tags like "musician", "politician", "journalist" and we encourage you to play around with the query above to plot the screen time of people associated with different tags.
  </p>
   <p> As you write queries it is important to be mindful that tags are <b>not exhaustive</b>.
    For example, a query using the filter "tag=politician" computes the screen time of all faces in the dataset that have been identified as politicians.  However, since not every politician in the dataset is correctly identified by automatic face recognition methods, the true screen time of people on the news who are actually politicians is certainly higher.  In some cases, tags are present for all faces in the data (e.g., gender, see the <a href="/data/tags">tags page</a> for a list).  Details about how Stanford Cable TV News Analyzer attributes tags to faces is provided on our <a href="/methodology">methodology page.</a>
  </p>

<h3>Composite Queries (AND's and OR's)</h3>

<p>
  To allow more precise control over what video segments are included in a screen time computation, queries may contain multiple filters connected by AND's and OR's.  For example, the graph below extends our previous Hillary Clinton vs. Bernie Sanders graph with a third line that plots the amount of time where both Mrs. Clinton AND Mr. Sanders are on screen.
</p>

<div class="graph_embed_div">
<iframe id="clintonAndSanders" class="graph_embed_3line"></iframe>
</div>

<p>
  A common use of multiple filters is limit screen time computations to certain channels, news programs, or specific times of day or days of the week.  For example, in the graph below we compare the screen time of Bernie Sanders between 6-10pm (US Eastern time) on CNN, with that of Fox News and MSNBC.  (Mr. Sanders receives the most screen time during this time period on MSNBC.)
</p>

<div class="graph_embed_div">
<iframe id="sandersChannelHour" class="graph_embed_3line"></iframe>
</div>

<h3>Transcript Filters</h3>

<p>
  Queries may also filter video content based on the text contents of video transcripts.  For example, if you were interested in how much certain foreign countries are discussed on the news, you could use <b>text</b> filters to compare the amount of time country names are mentioned in the transcript.  For example:
</p>

<div class="graph_embed_div">
<iframe id="countriesTranscript" class="graph_embed_5line"></iframe>
</div>

<p>
<b></b>
</p>

<p>
  The <a href="/docs">advanced documentation</a> page describes additional features of <b>text</b> filters, such the ability to specify of lists of words in a filter (e.g., topic lexicons) or perform searches that match inflections of a word.
</p>

<p>
  It is important to notice that the above graph plots measurements of time.  <b>It does not count the number of times the specified phrase is found in the transcript.</b> All queries run by the Stanford Cable TV Analyzer, regardless of the filters used, compute the time spanned by video segments that match the specified filters. When interpreting results of queries that contain <b>text</b> filters, users should be mindful that longer text phrases will likely contribute more time per found instance than shorter phrases.
</p>

<p>
  Since <b>text</b> filters (like all other filters) are used to select video segments, they can be combined with all other filters in queries.  Combining <b>text</b> and face filters (e.g, <b>name</b> or <b>tag</b>) can yield interesting queries. For example, the following graph computes the time Hillary Clinton is on screen AND the word "email" is spoken. This occurs far more often on Fox News than CNN or MSNBC.
</p>

<div class="graph_embed_div">
<iframe id="clintonEmailTranscript" class="graph_embed_3line"></iframe>
</div>

<p>
  Observe that the above graph computes the amount of time where Mrs. Clinton is on screen AND the word "email" is spoken, but this query does not mean that the word "email" was spoken by Mrs. Clinton. It is possible the speaker was another person on screen or even an off-screen voice. At this time the Stanford Cable TV Analyzer does not provide the ability to identify who is speaking and use this information in filters.
</p>

<h3>Viewing Video Clips</h3>

<p>
  In many situations it is useful to view examples of video clips that pass a queries filters.  For example, you might wish to inspect video clips to get of sense of whether automated face identification is robustly recognizing the person specified in the query. Another common task is to view selected clips when debugging a more complex query to ensure the query is selecting the types of videos intended.  When viewing a graphs on the main <a href="/">Stanford Cable TV News Analyzer</a> site, clicking on the graph will display a random selection of video clips that matched query's filters at that point in time.  You can further investigate these results by playing the video clips as well as viewing their transcripts.
</p>
<p>
  A sampling of results from our earlier query <b>{{ search_keys.face_name }}="Hillary Clinton"</b> are given below.  These thumbnails serve as a good reminder that a person can appear on screen in many different ways: as a guest on a show, in B-roll footage, or as a static image used as part of an infographic.
</p>

<p style="text-align: center;">
  <img class="example_img" src="{{ url_for('static', filename='img/tutorials/video_thumbs_clinton.jpg') }}" width="900" height="343" />
</p>

<hr>

<h3>You're set! Now try writing queries of your own...</h3>

<p>
  You've now seen a few basic examples of writing screen time queries.  We now invite you to try creating more of your own! We're excited to see what analyzes are possible.
</p>

<p>To learn more about more advanced query features not discussed in this tutorial, please take a look at the <a href="/docs">advanced queries page</a>. You may also want to browse the <a href="/data">dataset page</a> to learn about what people and tags available for use in queries.
</p>

<p>&nbsp;</p>

<script type="text/javascript">
  initialize();
  setIframeSource(
    '#clinton',
    ['{{ search_keys.face_name }}="Hillary Clinton"'],
    true
  );
  setIframeSource(
    '#clintonSanders', [
      '{{ search_keys.face_name }}="Hillary Clinton"',
      '{{ search_keys.face_name }}="Bernie Sanders"'
    ],
    true
  );
  setIframeSource(
    '#maleFemale', [
      '{{ search_keys.face_tag }}="male"',
      '{{ search_keys.face_tag }}="female"'
    ],
    true
  );
  setIframeSource(
    '#maleFemaleHost', [
      '{{ search_keys.face_tag }}="male and host"',
      '{{ search_keys.face_tag }}="female and host"'
    ],
    true
  );
  setIframeSource(
    '#clintonAndSanders', [
      '{{ search_keys.face_name }}="Hillary Clinton"',
      '{{ search_keys.face_name }}="Bernie Sanders"',
      '{{ search_keys.face_name }}="Hillary Clinton" and {{ search_keys.face_name }}="Bernie Sanders"'
    ],
    true
  );
  setIframeSource(
    '#sandersChannelHour', [
      '{{ search_keys.face_name }}="Bernie Sanders" and {{ search_keys.channel }}="cnn" and {{ search_keys.hour }}="18-22"',
      '{{ search_keys.face_name }}="Bernie Sanders" and {{ search_keys.channel }}="fox" and {{ search_keys.hour }}="18-22"',
      '{{ search_keys.face_name }}="Bernie Sanders" and {{ search_keys.channel }}="msnbc" and {{ search_keys.hour }}="18-22"'
    ],
    true
  );
  setIframeSource(
    '#countriesTranscript', [
      '{{ search_keys.text }}="France"',
      '{{ search_keys.text }}="United Kingdom | UK | U.K"',
      '{{ search_keys.text }}="China"',
      '{{ search_keys.text }}="Russia"',
      '{{ search_keys.text }}="North Korea"'
    ],
    true
  );
  setIframeSource(
    '#clintonEmailTranscript', [
      '{{ search_keys.face_name }}="Hillary Clinton" and {{ search_keys.text }}="email" and {{ search_keys.channel }}="cnn"',
      '{{ search_keys.face_name }}="Hillary Clinton" and {{ search_keys.text }}="email" and {{ search_keys.channel }}="fox"',
      '{{ search_keys.face_name }}="Hillary Clinton" and {{ search_keys.text }}="email" and {{ search_keys.channel }}="msnbc"'
    ],
    true
  );
</script>

<!--
<h3>More Query Examples</h3>

<p>
  If no filters are specified, then all videos match the query and the result is the total time of all video data in the dataset.
</p>

<div class="graph_embed_div">
<iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%234E79A7%22%2C%22text%22%3A%22%22%7D%5D%7D"></iframe>
</div>

<p>
  By only using a channel filter, we can compare the total amount of video in the dataset coming from each channel.
</p>

<div class="graph_embed_div">
<iframe class="graph_embed" src="https://esper-tv.stanford.edu/embed?dataVersion=v1&data=%7B%22options%22%3A%7B%22start_date%22%3A%222010-01-01%22%2C%22end_date%22%3A%222019-07-23%22%2C%22aggregate%22%3A%22month%22%7D%2C%22queries%22%3A%5B%7B%22color%22%3A%22%2376B7B2%22%2C%22text%22%3A%22channel%3D%5C%22cnn%5C%22%22%7D%2C%7B%22color%22%3A%22%23E15759%22%2C%22text%22%3A%22channel%3D%5C%22fox%5C%22%22%7D%2C%7B%22color%22%3A%22%23B07AA1%22%2C%22text%22%3A%22channel%3D%5C%22msnbc%5C%22%22%7D%5D%7D"></iframe>
</div>
-->

</div>
{% endblock %}
